@model MummyProfileViewModel

@inject IAuthorizationService AuthorizationService

<h1 class="display-4">
    Mummy Profile: @Model.Location.BurialLocationNs @Model.Location.LowPairNs/@Model.Location.HighPairNs @Model.Location.BurialLocationEw @Model.Location.LowPairEw/@Model.Location.HighPairEw
    @Model.Location.Subplot #@Model.Location.BurialNumber
</h1>

<button type="button" class="btn"
        onclick="replaceContents(this.id, @Model.Mummy.MummyId, 'mummy')" id="MummyAttributes">
    Attributes
</button>
<button class="btn" onclick="replaceContents(this.id, @Model.Location.LocationId, 'location')" id="MummyLocation">Location</button>
<button class="btn" onclick="replaceContents(this.id, @Model.Measurement.MeasurementId, 'measurement')" id="MummyMeasurements">Measurements</button>
@if ((AuthorizationService.AuthorizeAsync(User, Permissions.Burials.Create)).Result.Succeeded)
{
    <button class="btn" onclick="replaceContents(this.id, @Model.Mummy.MummyId, 'notes')" id="MummyNotes">Field Notes</button>
    <button class="btn" onclick="replaceContents(this.id, @Model.Mummy.MummyId, 'sample')" id="MummySamples">Samples</button>
    <button class="btn" onclick="replaceContents(this.id, @Model.Mummy.MummyId, 'carbon')" id="MummyCarbon">Carbon Dating</button>
    <button type="button" class="btn btn-danger btn-lg my-3" data-toggle="modal" data-target="#Delete-@Model.Mummy.MummyId">
        Delete: @Model.Location.BurialLocationNs @Model.Location.LowPairNs/@Model.Location.HighPairNs @Model.Location.BurialLocationEw @Model.Location.LowPairEw/@Model.Location.HighPairEw
        @Model.Location.Subplot #@Model.Location.BurialNumber
    </button>

    <div class="modal fade" id="Delete-@Model.Mummy.MummyId" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-xl modal-height" role="document">
            <div class="modal-content">
                <div class="modal-header">

                    <h5 class="modal-title" id="exampleModalLabel">
                        Delete Mummy @Model.Location.BurialLocationNs @Model.Location.LowPairNs/@Model.Location.HighPairNs @Model.Location.BurialLocationEw @Model.Location.LowPairEw/@Model.Location.HighPairEw
                        @Model.Location.Subplot #@Model.Location.BurialNumber
                    </h5>


                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <p>
                        By deleting Mummy : @Model.Location.BurialLocationNs @Model.Location.LowPairNs/@Model.Location.HighPairNs @Model.Location.BurialLocationEw @Model.Location.LowPairEw/@Model.Location.HighPairEw
                        @Model.Location.Subplot #@Model.Location.BurialNumber, all information will be permanetly lost.
                    </p>
                </div>
                <div class="modal-footer">
                    <div class="row">
                        <div class="col">
                            <form asp-controller="Home" asp-action="DeleteConfirmed" method="post">
                                <input type="hidden" value="@Model.Mummy.MummyId" />
                                <button class="btn btn-danger" type="submit">Delete</button>
                            </form>
                        </div>
                        <div class="col">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
}
<button class="btn" onclick="replaceContents(this.id, @Model.Mummy.MummyId, 'images')" id="MummyImages">Images</button>
<button class="btn" onclick="replaceContents(this.id, @Model.Mummy.MummyId, 'files')" id="MummyFiles">Files</button>
<button class="btn" onclick="replaceContents(this.id, @Model.Mummy.MummyId, 'manage')" id="MummyManage">Manage</button>
<div id="partialView">
</div>

<script>
    //on load select the attributes tab
    function replaceContents(partialViewToInsert, id, type ) {
        $.ajax({
            url: '@Url.Action("PartialView", "Home")',
            data: {
                id: partialViewToInsert,
                selector: id,
                type: type
            },
            type: "POST",
            success: function(data) {
                $('#partialView').html(data);
            }
        });

        activateButton(partialViewToInsert);
    }

    function activateButton(id) {
        $('#MummyAttributes').removeClass('btn-link').css("color", "black")
        $('#MummyLocation').removeClass('btn-link').css("color", "black")
        $('#MummyMeasurements').removeClass('btn-link').css("color", "black")
        $('#MummyNotes').removeClass('btn-link').css("color", "black")
        $('#MummySamples').removeClass('btn-link').css("color", "black")
        $('#MummyCarbon').removeClass('btn-link').css("color", "black")
        $('#MummyImages').removeClass('btn-link').css("color", "black")
        $('#MummyFiles').removeClass('btn-link').css("color", "black")
        $('#MummyManage').removeClass('btn-link').css("color", "black")
        $('#' + id).addClass('btn-link').css("color", "white");
    }
</script>
